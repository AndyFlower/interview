#  面试题

- 为什么使用消息队列
- 消息队列有什么优点和缺点
- Kafka ActiveMQ RabbitMQ RocketMQ都有什么区别，以及适合哪些场景

# 面试官心里分析


其实主要是想看看

- 第一，你知不知道你们系统里为什么要用消息队列？

不少人说自己项目了用了Redis、MQ，但是其实并不知道自己为什么要用这个东西，其实只是为了用而用，或者是别人做的选型，自己没有做过多的思考。

- 第二，既然用到了消息队列，知不知道用了这个有什么好处和坏处？

如果没有思考过这个，忙吗弄个MQ进系统就会后患无穷。

- 第三，既然你用了MQ，可能是某一种MQ，那么当时选型的时候有没有做过思考，why this  not other ?

每一个消息队列都没有绝对的好坏，主要看用在什么场景之内。

# 面试剖析

## 为什么使用消息队列

其实就是在询问消息队列有哪些使用场景，然后项目中具体是什么场景，并说说在这个场景里用消息队列是什么场景？
期望的回答是，公司有什么业务场景，这个业务场景有什么技术挑战，如果不用MQ可能会很麻烦，但是你现在用了MQ之后带给了你很多的好处。

使用场景：**解耦**   **异步**  **削峰**

### 解耦

A系统发送数据到BCD三个系统，通过接口调用发送，如果E系统也要这个数据的话，或者C系统不用了呢。

![MQ示例图1](https://github.com/AndyFlower/interview/blob/master/src/main/java/com/slp/demo/interview/img/mq-1.png)

在这个场景中，A系统跟其他各种乱七八糟的系统严重耦合，A系统产生一条比较关键的数据，很多系统都需要A系统将这个数据发送过来，A系统要时时刻刻考虑BCDE四个系统如果挂了怎么办？要不要重发，要不要把消息存起来？

如果使用MQ,A系统产生一条数据，发送到MQ里面去，哪个系统吸引数据自己取MQ里面消费，如果新系统需要数据，直接从MQ里面消费即可；如果某个系统不需要这条数据了，就取消对MQ消息的消费即可。这样，A系统就不需要去考虑发给谁，不需要维护这部分，也不用去处理是否成功或失败超时等问题。
